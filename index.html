<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2025å¹´åº¦ç¾¤èŠäººæ ¼æŠ¥å‘Š</title>
    <!-- å¼•å…¥ Tailwind CSS è¿›è¡Œå¿«é€Ÿå¸ƒå±€ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Anime.js ç”¨äºå¤æ‚åŠ¨ç”» -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <!-- å¼•å…¥ Chart.js ç”¨äºå›¾è¡¨ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* --- å…¨å±€æ ·å¼ & å­—ä½“ --- */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=ZCOOL+XiaoWei&display=swap');

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* ç¦æ­¢é»˜è®¤æ»šåŠ¨ */
            background-color: #0f172a;
            color: #e2e8f0;
            font-family: 'Noto Serif SC', serif;
        }

        /* --- èƒŒæ™¯åŠ¨æ€æ¸å˜ --- */
        .bg-gradient-animate {
            background: linear-gradient(-45deg, #020024, #090979, #1c1c3c, #00d4ff);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -2;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* æ˜Ÿæ˜Ÿç²’å­å®¹å™¨ */
        #stars-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: twinkle var(--duration) ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* --- æ»‘åŠ¨å®¹å™¨ --- */
        .swiper-container {
            height: 100vh;
            width: 100vw;
            transition: transform 0.8s cubic-bezier(0.645, 0.045, 0.355, 1);
        }

        .slide {
            height: 100vh;
            width: 100vw;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            box-sizing: border-box;
            opacity: 0;
            transition: opacity 1s ease 0.5s; /* å»¶è¿Ÿæ˜¾ç¤ºå†…å®¹ */
        }

        .slide.active {
            opacity: 1;
        }

        /* --- å‘ä¸Šæ»‘åŠ¨æç¤º --- */
        .arrow-up {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 30px;
            border-left: 2px solid rgba(255,255,255,0.5);
            border-top: 2px solid rgba(255,255,255,0.5);
            transform: translateX(-50%) rotate(45deg);
            animation: arrowAnim 2s infinite;
            z-index: 100;
        }

        @keyframes arrowAnim {
            0% { opacity: 0; bottom: 20px; }
            50% { opacity: 1; bottom: 30px; }
            100% { opacity: 0; bottom: 40px; }
        }

        /* --- ç‰¹æ®Šç»„ä»¶æ ·å¼ --- */
        .avatar-glow {
            box-shadow: 0 0 30px rgba(100, 200, 255, 0.4);
            animation: pulse 3s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(100, 200, 255, 0.4); }
            70% { box-shadow: 0 0 0 20px rgba(100, 200, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(100, 200, 255, 0); }
        }

        .highlight-text {
            color: #67e8f9; /* cyan-300 */
            font-weight: bold;
            font-family: 'ZCOOL XiaoWei', serif;
        }

        .keyword-main {
            font-size: 5rem;
            background: linear-gradient(to right, #fff, #a5f3fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: 'ZCOOL XiaoWei', serif;
            text-shadow: 0 0 20px rgba(103, 232, 249, 0.5);
        }

        .bubble {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 12px;
        }

        /* è¯äº‘åŠ¨ç”» */
        .word-cloud-item {
            position: absolute;
            font-family: 'ZCOOL XiaoWei', serif;
            color: rgba(255,255,255,0.6);
            transition: all 0.5s;
        }

        /* æ‰“å­—æœºå…‰æ ‡ */
        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }

        /* éŸ³ä¹å”±ç‰‡æ—‹è½¬ */
        .disk-rotate {
            animation: rotate 10s linear infinite;
        }
        @keyframes rotate { 100% { transform: rotate(360deg); } }

    </style>
</head>
<body>

    <!-- èƒŒæ™¯ -->
    <div class="bg-gradient-animate"></div>
    <div id="stars-container"></div>

    <!-- æ»‘åŠ¨æç¤º -->
    <div class="arrow-up" id="arrow"></div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="swiper-container" id="swiper">
        
        <!-- P1: å°é¢ -->
        <section class="slide active" id="slide-0">
            <div class="relative z-10 text-center">
                <img id="user-avatar" src="" alt="Avatar" class="w-32 h-32 rounded-full mx-auto mb-6 border-4 border-white/20 avatar-glow object-cover">
                <h2 class="text-2xl font-light mb-2 text-blue-200">Hi, <span id="user-name" class="font-bold text-white"></span></h2>
                <h1 class="text-4xl md:text-5xl font-bold mb-4 font-serif tracking-wider mt-4">2025<br>ç¾¤èŠäººæ ¼æŠ¥å‘Š</h1>
                <p class="text-sm text-blue-300 mt-8 opacity-80">æ—¶é—´è·¨åº¦: 2025.11.10 - 2025.12.17</p>
                <div class="mt-12 text-sm text-gray-400">ä¸‹æ»‘å¼€å¯å›å¿†</div>
            </div>
        </section>

        <!-- P2: åŸºç¡€æ•°æ® & æ´»è·ƒæ¦‚è§ˆ -->
        <section class="slide" id="slide-1">
            <div class="max-w-md w-full text-center space-y-8">
                <div class="text-lg animate-fade-up">è¿™æ®µæ—¶é—´é‡Œ</div>
                <div class="text-left bg-white/5 p-6 rounded-2xl border border-white/10 backdrop-blur-sm animate-fade-up delay-100">
                    <p class="mb-4">ä½ ä¸€å…±åœ¨è¿™ä¸ªç¾¤å‘é€äº† <span class="text-4xl highlight-text" id="msg-count">0</span> æ¡æ¶ˆæ¯</p>
                    <p>å¹³å‡æ¯æ¡æ¶ˆæ¯ <span class="highlight-text" id="avg-chars">0</span> ä¸ªå­—</p>
                    <p class="mt-4 text-sm text-gray-300">çŸ­å°ç²¾æ‚ï¼Œæˆ–æ˜¯å­—å­—ç ç‘ï¼Ÿ</p>
                </div>
                
                <div class="grid grid-cols-2 gap-4 animate-fade-up delay-200">
                    <div class="bg-blue-900/30 p-4 rounded-xl">
                        <div class="text-2xl font-bold text-yellow-300" id="active-days">0</div>
                        <div class="text-xs text-gray-400">æ´»è·ƒå¤©æ•°</div>
                    </div>
                    <div class="bg-blue-900/30 p-4 rounded-xl">
                        <div class="text-2xl font-bold text-pink-300" id="standby-hours">0</div>
                        <div class="text-xs text-gray-400">å¾…æœºå°æ—¶</div>
                    </div>
                </div>
                <p class="text-sm italic text-blue-200 mt-4" id="time-comment"></p>
            </div>
        </section>

        <!-- P3: ä½œæ¯è§„å¾‹ (å›¾è¡¨) -->
        <section class="slide" id="slide-2">
            <div class="w-full max-w-lg">
                <h3 class="text-2xl mb-6 text-center font-serif">ä½ çš„ç”Ÿç‰©é’Ÿ</h3>
                <div class="relative h-64 w-full mb-6 bg-black/20 rounded-lg p-2">
                    <canvas id="hourChart"></canvas>
                </div>
                <div class="text-center space-y-4">
                    <p>ä½ åœ¨ <span class="highlight-text text-xl" id="peak-hour"></span> ç‚¹æœ€ä¸ºæ´»è·ƒ</p>
                    <p>æ˜¯ä¸ª <span class="highlight-text" id="owl-type"></span></p>
                    <div class="text-sm bg-white/5 p-3 rounded inline-block mt-2">
                        <p class="text-gray-300">æœ€æ—©å‘è¨€: <span id="earliest-msg-time"></span></p>
                        <p class="text-gray-300">æœ€æ™šä¿®ä»™: <span id="latest-msg-time"></span></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- P4: ç¤¾äº¤å…³ç³» (æœ€åœ¨æ„/è¢«åœ¨æ„) -->
        <section class="slide" id="slide-3">
            <h3 class="text-2xl mb-8 font-serif">ç¾ç»ŠÂ·é“¾æ¥</h3>
            
            <!-- Most Care -->
            <div class="w-full max-w-md relative mb-8 animate-slide-right">
                <div class="absolute -left-4 top-0 text-6xl opacity-10 font-bold">FOCUS</div>
                <div class="bg-gradient-to-r from-purple-900/50 to-blue-900/50 p-6 rounded-r-2xl border-l-4 border-purple-400">
                    <div class="text-xs text-purple-300 uppercase tracking-widest mb-1">ä½ æœ€å…³æ³¨çš„äºº</div>
                    <div class="flex justify-between items-center">
                        <div class="text-2xl font-bold" id="care-name"></div>
                        <div class="text-purple-200 text-sm">å…³æ³¨åº¦ <span id="care-score" class="text-xl font-bold"></span></div>
                    </div>
                    <p class="text-xs text-gray-400 mt-2">è™½ç„¶åª@äº†TA <span id="care-at"></span> æ¬¡ï¼Œä½†ä½ ä»¬çš„çª—å£æœŸé•¿è¾¾ <span id="care-window"></span> ç§’</p>
                </div>
            </div>

            <!-- Cared By -->
            <div class="w-full max-w-md relative animate-slide-left delay-200">
                 <div class="absolute -right-4 top-0 text-6xl opacity-10 font-bold">FANS</div>
                <div class="bg-gradient-to-l from-pink-900/50 to-red-900/50 p-6 rounded-l-2xl border-r-4 border-pink-400 text-right">
                    <div class="text-xs text-pink-300 uppercase tracking-widest mb-1">æœ€å…³æ³¨ä½ çš„äºº</div>
                    <div class="flex justify-between items-center flex-row-reverse">
                        <div class="text-2xl font-bold" id="fans-name"></div>
                        <div class="text-pink-200 text-sm">å…³æ³¨åº¦ <span id="fans-score" class="text-xl font-bold"></span></div>
                    </div>
                    <p class="text-xs text-gray-400 mt-2">TAå›å¤äº†ä½  <span id="fans-reply"></span> æ¬¡ï¼Œ@äº†ä½  <span id="fans-at"></span> æ¬¡</p>
                </div>
            </div>

            <!-- CP -->
            <div class="mt-8 text-center animate-fade-in delay-500">
                <p class="text-sm text-gray-400 mb-2">ä½ çš„å®˜æ–¹è®¤è¯ CP</p>
                <div class="inline-flex items-center bg-white/10 px-6 py-2 rounded-full border border-white/20">
                    <span class="font-bold text-yellow-300" id="cp-a"></span>
                    <span class="mx-2 text-red-500">â¤</span>
                    <span class="font-bold text-yellow-300" id="cp-b"></span>
                </div>
                <div class="text-xs text-gray-500 mt-1">CPå€¼: <span id="cp-score"></span></div>
            </div>
        </section>

        <!-- P5: ç¤¾äº¤æˆåˆ† & äº’åŠ¨ -->
        <section class="slide" id="slide-4">
            <h3 class="text-2xl mb-6 font-serif">ç¤¾äº¤æˆåˆ†åˆ†æ</h3>
            
            <div class="grid grid-cols-2 gap-6 w-full max-w-md">
                <!-- Coolness -->
                <div class="bg-white/5 p-4 rounded-2xl border border-white/10 text-center flex flex-col items-center justify-center aspect-square">
                    <div class="text-4xl mb-2">ğŸ˜</div>
                    <div class="text-sm text-gray-400">é«˜å†·æŒ‡æ•°</div>
                    <div class="text-3xl font-bold mt-1 text-blue-300" id="cool-score">0</div>
                    <div class="text-xs text-gray-500 mt-1">è¢«@/å›å¤æ¯”: <span id="cool-ratio"></span></div>
                </div>

                <!-- Topic Killer -->
                <div class="bg-white/5 p-4 rounded-2xl border border-white/10 text-center flex flex-col items-center justify-center aspect-square">
                    <div class="text-4xl mb-2">ğŸ§Š</div>
                    <div class="text-sm text-gray-400">è¯é¢˜ç»ˆç»“ç‡</div>
                    <div class="text-3xl font-bold mt-1 text-cyan-300" id="killer-rate">0%</div>
                    <div class="text-xs text-gray-500 mt-1">ç»ˆç»“äº† <span id="killer-count"></span> ä¸ªè¯é¢˜</div>
                </div>

                <!-- Meme Ratio -->
                <div class="col-span-2 bg-white/5 p-4 rounded-2xl border border-white/10 flex items-center justify-between">
                    <div>
                        <div class="text-sm text-gray-400">è¡¨æƒ…åŒ…æµ“åº¦</div>
                        <div class="text-2xl font-bold text-purple-300"><span id="meme-ratio"></span>%</div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-400">å¤è¯»æœºè¡Œä¸º</div>
                        <div class="text-2xl font-bold text-green-300"><span id="repeater-count"></span> æ¬¡</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- P6: é—ªå…‰æ—¶åˆ» -->
        <section class="slide" id="slide-5">
            <div class="w-full max-w-lg space-y-6">
                <h3 class="text-2xl text-center font-serif mb-8">å¹´åº¦é—ªå…‰æ—¶åˆ»</h3>
                
                <!-- Longest -->
                <div class="bubble p-5 relative overflow-hidden">
                    <div class="text-xs text-yellow-500 font-bold mb-2">ğŸ“œ æœ€é•¿ç¯‡å¤§è®º</div>
                    <div class="text-sm leading-relaxed text-gray-300 line-clamp-4 italic" id="long-msg"></div>
                    <div class="text-xs text-gray-500 mt-2 text-right" id="long-date"></div>
                </div>

                <!-- Night -->
                <div class="bubble p-5 relative">
                    <div class="text-xs text-blue-500 font-bold mb-2">ğŸŒ™ æœ€æ™šçš„å¤œ</div>
                    <div class="text-xl text-center font-serif my-4" id="night-msg"></div>
                    <div class="text-xs text-gray-500 text-center">
                        <span id="night-date"></span> at <span id="night-time"></span>
                    </div>
                </div>

                <!-- Repeat -->
                <div class="bubble p-5 flex justify-between items-center">
                    <div>
                        <div class="text-xs text-green-500 font-bold">ğŸ¦œ å¹´åº¦å£å¤´ç¦…</div>
                        <div class="text-2xl mt-1 font-bold" id="repeat-word"></div>
                    </div>
                    <div class="text-right">
                        <div class="text-3xl font-bold opacity-20">x<span id="repeat-count"></span></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- P7: å¹´åº¦å…³é”®è¯ (æ ¸å¿ƒå±•ç¤º) -->
        <section class="slide" id="slide-6">
            <div class="absolute inset-0 z-0 overflow-hidden" id="word-cloud-bg">
                <!-- Word Cloud Items generated by JS -->
            </div>

            <div class="relative z-10 text-center w-full">
                <p class="text-sm tracking-[0.5em] uppercase text-gray-400 mb-4">Keyword of the Year</p>
                
                <div class="keyword-main scale-0" id="annual-keyword"></div>
                
                <div class="mt-12 h-20 flex flex-col items-center justify-center">
                    <div class="text-cyan-200 text-lg md:text-xl font-light italic typing-cursor" id="keyword-sentence"></div>
                </div>
            </div>
        </section>

        <!-- P8: äººæ ¼ç”»åƒ -->
        <section class="slide" id="slide-7">
            <div class="w-full max-w-md text-center">
                <div class="w-32 h-32 mx-auto rounded-full bg-gradient-to-tr from-purple-500 to-blue-500 p-1 mb-8 disk-rotate">
                    <img id="persona-avatar" src="" class="w-full h-full rounded-full object-cover">
                </div>

                <h2 class="text-sm text-gray-400 tracking-widest mb-2">å¹´åº¦ç¾¤èŠäººæ ¼</h2>
                <h1 class="text-4xl md:text-5xl font-bold text-white mb-6 font-serif" id="persona-title"></h1>
                
                <div class="relative p-6">
                    <span class="absolute top-0 left-0 text-4xl text-white/20">â€œ</span>
                    <p class="text-gray-200 leading-relaxed text-justify px-4" id="persona-copy"></p>
                    <span class="absolute bottom-0 right-0 text-4xl text-white/20">â€</span>
                </div>

                <div class="mt-8 flex flex-wrap justify-center gap-2" id="ai-tags">
                    <!-- Tags -->
                </div>
            </div>
        </section>

        <!-- P9: AI å¯„è¯­ -->
        <section class="slide" id="slide-8">
            <div class="max-w-md text-center space-y-8">
                <div class="text-6xl mb-4">ğŸ¤–</div>
                <h3 class="text-xl font-bold text-blue-200">AI çš„æ‚„æ‚„è¯</h3>
                <div class="bg-gradient-to-b from-blue-900/40 to-black/40 p-6 rounded-xl border border-blue-500/30">
                    <p class="text-lg text-white mb-6 font-serif" id="ai-oneliner"></p>
                    <div class="h-px w-full bg-white/10 mb-6"></div>
                    <ul class="text-sm text-gray-400 text-left space-y-3 list-disc pl-4" id="ai-tips">
                        <!-- Tips -->
                    </ul>
                </div>
                
                <button onclick="location.reload()" class="mt-12 px-8 py-3 bg-white/10 hover:bg-white/20 rounded-full text-sm transition border border-white/20">
                    å†çœ‹ä¸€é
                </button>
            </div>
        </section>

    </div>

<script>
    // --- 1. æ•°æ®æ³¨å…¥ (æ¥è‡ª Prompt) ---
    const rawData = {
      "schema": "group_persona_report.v2",
      "generatedAt": 1766051892,
      "range": {
        "start": "2025-11-10 00:00:00",
        "end": "2025-12-17 00:00:00"
      },
      "target": {
        "userId": "845245653",
        "nickname": "HJTY",
        "avatar": {
          "url": "http://q.qlogo.cn/g?b=qq&nk=845245653&s=640"
        }
      },
      "stats": {
        "messageCount": 653,
        "activeDays": 23,
        "time": {
          "worktimeRatio": 51,
          "nightOwlCount": 29,
          "standbySpanSeconds": 1951122,
          "earliestMessageTs": 1763949612,
          "latestMessageTs": 1765900734
        },
        "interaction": {
          "beMentionedCount": 39,
          "beRepliedCount": 63,
          "replyOthersCount": 32,
          "coolness": {
            "score": 37,
            "beMentionedVsReplyRatio": 1.22
          },
          "supporterScore": 32,
          "coldTopicCount": 106,
          "topicKillerRate": 16
        },
        "content": {
          "avgChars": 13,
          "memeRatio": 9,
          "repeaterCount": 17
        }
      },
      "series": {
        "byHour": [
          {"hour": 0, "count": 40}, {"hour": 1, "count": 26}, {"hour": 2, "count": 3},
          {"hour": 3, "count": 0}, {"hour": 4, "count": 0}, {"hour": 5, "count": 0},
          {"hour": 6, "count": 0}, {"hour": 7, "count": 1}, {"hour": 8, "count": 8},
          {"hour": 9, "count": 17}, {"hour": 10, "count": 26}, {"hour": 11, "count": 44},
          {"hour": 12, "count": 63}, {"hour": 13, "count": 71}, {"hour": 14, "count": 43},
          {"hour": 15, "count": 29}, {"hour": 16, "count": 41}, {"hour": 17, "count": 50},
          {"hour": 18, "count": 49}, {"hour": 19, "count": 33}, {"hour": 20, "count": 21},
          {"hour": 21, "count": 45}, {"hour": 22, "count": 17}, {"hour": 23, "count": 26}
        ]
      },
      "rank": {
        "personaTitle": {
          "name": "æ·±å¤œå“²å­¦å®¶",
          "copywriting": "è¿™ä¸€å¹´ï¼Œä½ æ€»åœ¨æ·±å¤œå‡ºæ²¡ï¼Œç”¨å¹³å‡13ä¸ªå­—çš„çŸ­å¥ï¼Œç‚¹äº®äº†29ä¸ªå¤œæ™šçš„å¯¹è¯æ¡†ã€‚\nå½“ä¸–ç•Œæ²‰ç¡ï¼Œä½ çš„æ€ç»ªå´æ ¼å¤–æ¸…é†’ï¼Œå¶å°”ä¸€å¥â€œéƒ½ä¸è¡Œâ€ï¼Œæ˜¯æ·±å¤œç‹¬æœ‰çš„å€”å¼ºä¸æ€è€ƒã€‚"
        }
      },
      "social": {
        "mostYouCare": { "nickname": "ï¿¼", "score": 642, "at": 0, "window": 622 },
        "mostCareYou": { "nickname": "ç»¿ç³", "score": 138, "at": 11, "reply": 18 },
        "bestCP": { "userA": { "nickname": "HJTY" }, "userB": { "nickname": "LaVI" }, "interactionScore": 13 },
        "lickDogTarget": { "count": 642 }
      },
      "moments": {
        "mostRepeated": { "text": "ï¼Ÿ", "count": 6 },
        "longestMessage": { "chars": 472, "text": "è¿™ä»€ä¹ˆé—®é¢˜ï¼š [14:14:41] [Core] [ERRO] [respond.stage:266]: å‘é€æ¶ˆæ¯é“¾å¤±è´¥...", "ts": 1764051441 },
        "latestNight": { "date": "2025-12-09", "time": "02:26", "text": "éƒ½ä¸è¡Œ" },
        "annualKeyword": "æ—¶ä»£",
        "wordCloud": [
          {"word": "æ—¶ä»£", "count": 33}, {"word": "å­¦ç”Ÿ", "count": 32}, {"word": "gemini", "count": 19},
          {"word": "æ¸¸æˆ", "count": 15}, {"word": "å¤©èµ‹", "count": 14}, {"word": "æŠ½å¡", "count": 14},
          {"word": "é­”æ³•", "count": 14}, {"word": "å°‘å¥³", "count": 14}, {"word": "é­”å¥³", "count": 14},
          {"word": "å®¡åˆ¤", "count": 14}, {"word": "ç°åœ¨", "count": 13}, {"word": "ç„¶å", "count": 11}
        ],
        "keywordRepresentations": [
          "è¦å˜æˆå­¦ç”Ÿæ—¶ä»£äº†å—",
          "æˆ‘ä»¬è¿™é‡Œä¸æ˜¯å­¦ç”Ÿæ—¶ä»£.jpg",
          "è¿˜çœŸæ˜¯å­¦ç”Ÿæ—¶ä»£"
        ]
      },
      "ai": {
        "keywords": ["æ·±å¤œå“²å­¦å®¶", "è¯é¢˜ç»ˆç»“è€…", "ç¾¤èŠå¤è¯»æœº"],
        "oneLiner": "åœ¨æ·±å¤œçš„ç¾¤èŠé‡Œï¼Œä½ æ˜¯é‚£ä¸ªç”¨çŸ­å¥ç‚¹äº®å¯¹è¯çš„å“²å­¦å®¶ã€‚",
        "tips": [
          "å¶å°”ä¹Ÿè¯•è¯•åœ¨ç™½å¤©å†’æ³¡ï¼Œè®©é˜³å…‰æ™’æ™’ä½ çš„â€˜æ·±å¤œå“²å­¦â€™å§ã€‚",
          "ä½ ç»ˆç»“äº†16%çš„è¯é¢˜ï¼Œä¸‹æ¬¡æˆ–è®¸å¯ä»¥è¯•ç€å½“ä¸€ä¸ªâ€˜è¯é¢˜å¯åŠ¨å™¨â€™ï¼Ÿ"
        ]
      }
    };

    // --- 2. å·¥å…·å‡½æ•° ---
    const formatTime = (ts) => {
        const date = new Date(ts * 1000);
        return `${date.getHours().toString().padStart(2,'0')}:${date.getMinutes().toString().padStart(2,'0')}`;
    };
    const formatDate = (ts) => {
        const date = new Date(ts * 1000);
        return `${date.getMonth()+1}æœˆ${date.getDate()}æ—¥`;
    };

    // --- 3. é¡µé¢æ¸²æŸ“é€»è¾‘ ---
    function initReport() {
        // P1
        document.getElementById('user-avatar').src = rawData.target.avatar.url;
        document.getElementById('user-name').innerText = rawData.target.nickname;
        document.getElementById('persona-avatar').src = rawData.target.avatar.url;

        // P2 Stats
        document.getElementById('msg-count').innerText = rawData.stats.messageCount;
        document.getElementById('avg-chars').innerText = rawData.stats.content.avgChars;
        document.getElementById('active-days').innerText = rawData.stats.activeDays + ' å¤©';
        document.getElementById('standby-hours').innerText = Math.round(rawData.stats.time.standbySpanSeconds / 3600) + ' å°æ—¶';
        
        let timeComment = "";
        if(rawData.stats.time.nightOwlCount > 10) timeComment = "è¶Šå¤œè¶Šç²¾ç¥ï¼Œè¯´çš„å°±æ˜¯ä½ å§ï¼Ÿ";
        else timeComment = "ä½œæ¯è§„å¾‹ï¼Œä½ æ˜¯ç¾¤é‡Œçš„å¥åº·æ‹…å½“ã€‚";
        document.getElementById('time-comment').innerText = timeComment;

        // P3 Chart Data Prep
        const hours = rawData.series.byHour.map(h => h.hour);
        const counts = rawData.series.byHour.map(h => h.count);
        const maxCount = Math.max(...counts);
        const peakHour = hours[counts.indexOf(maxCount)];
        
        document.getElementById('peak-hour').innerText = peakHour;
        document.getElementById('owl-type').innerText = peakHour >= 22 || peakHour <= 4 ? "æ·±å¤œå…š" : "æ—¥å…‰æ—";
        document.getElementById('earliest-msg-time').innerText = formatTime(rawData.stats.time.earliestMessageTs);
        document.getElementById('latest-msg-time').innerText = formatTime(rawData.stats.time.latestMessageTs);

        // ChartJS Rendering
        const ctx = document.getElementById('hourChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: hours.map(h => h),
                datasets: [{
                    label: 'å‘è¨€æ•°',
                    data: counts,
                    borderColor: 'rgba(103, 232, 249, 0.8)',
                    backgroundColor: 'rgba(103, 232, 249, 0.2)',
                    fill: true,
                    tension: 0.4,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: { display: false },
                    y: { display: false }
                }
            }
        });

        // P4 Social
        const mostCare = rawData.social.mostYouCare;
        document.getElementById('care-name').innerText = mostCare.nickname || "æœªçŸ¥";
        document.getElementById('care-score').innerText = mostCare.score;
        document.getElementById('care-at').innerText = mostCare.at;
        document.getElementById('care-window').innerText = mostCare.window;

        const fans = rawData.social.mostCareYou;
        document.getElementById('fans-name').innerText = fans.nickname;
        document.getElementById('fans-score').innerText = fans.score;
        document.getElementById('fans-reply').innerText = fans.reply;
        document.getElementById('fans-at').innerText = fans.at;

        document.getElementById('cp-a').innerText = rawData.social.bestCP.userA.nickname;
        document.getElementById('cp-b').innerText = rawData.social.bestCP.userB.nickname;
        document.getElementById('cp-score').innerText = rawData.social.bestCP.interactionScore;

        // P5 Analysis
        document.getElementById('cool-score').innerText = rawData.stats.interaction.coolness.score;
        document.getElementById('cool-ratio').innerText = rawData.stats.interaction.coolness.beMentionedVsReplyRatio;
        document.getElementById('killer-rate').innerText = rawData.stats.interaction.topicKillerRate + '%';
        document.getElementById('killer-count').innerText = rawData.stats.interaction.coldTopicCount;
        document.getElementById('meme-ratio').innerText = rawData.stats.content.memeRatio;
        document.getElementById('repeater-count').innerText = rawData.stats.content.repeaterCount;

        // P6 Moments
        document.getElementById('long-msg').innerText = rawData.moments.longestMessage.text;
        document.getElementById('long-date').innerText = formatDate(rawData.moments.longestMessage.ts);
        
        document.getElementById('night-msg').innerText = rawData.moments.latestNight.text;
        document.getElementById('night-date').innerText = rawData.moments.latestNight.date;
        document.getElementById('night-time').innerText = rawData.moments.latestNight.time;

        document.getElementById('repeat-word').innerText = rawData.moments.mostRepeated.text;
        document.getElementById('repeat-count').innerText = rawData.moments.mostRepeated.count;

        // P7 Keywords
        document.getElementById('annual-keyword').innerText = rawData.moments.annualKeyword;
        
        // P8 Persona
        document.getElementById('persona-title').innerText = rawData.rank.personaTitle.name;
        document.getElementById('persona-copy').innerText = rawData.rank.personaTitle.copywriting;
        const tagsContainer = document.getElementById('ai-tags');
        rawData.ai.keywords.forEach(tag => {
            const span = document.createElement('span');
            span.className = "px-3 py-1 bg-blue-500/20 rounded-full text-xs text-blue-200 border border-blue-500/30";
            span.innerText = "#" + tag;
            tagsContainer.appendChild(span);
        });

        // P9 AI
        document.getElementById('ai-oneliner').innerText = rawData.ai.oneLiner;
        const tipsContainer = document.getElementById('ai-tips');
        rawData.ai.tips.forEach(tip => {
            const li = document.createElement('li');
            li.innerText = tip;
            tipsContainer.appendChild(li);
        });
    }

    // --- 4. è¯äº‘é€»è¾‘ ---
    function renderWordCloud() {
        const container = document.getElementById('word-cloud-bg');
        container.innerHTML = '';
        rawData.moments.wordCloud.forEach(item => {
            const el = document.createElement('div');
            el.className = 'word-cloud-item';
            el.innerText = item.word;
            // éšæœºå¤§å°æ ¹æ® count è°ƒæ•´ (12px - 30px)
            const size = Math.min(30, Math.max(12, item.count)); 
            el.style.fontSize = size + 'px';
            // éšæœºä½ç½®
            el.style.top = Math.random() * 80 + 10 + '%';
            el.style.left = Math.random() * 80 + 10 + '%';
            // éšæœºé€æ˜åº¦
            el.style.opacity = Math.random() * 0.5 + 0.1;
            container.appendChild(el);
            
            // ç®€å•æµ®åŠ¨åŠ¨ç”»
            anime({
                targets: el,
                translateY: [0, Math.random() * 50 - 25],
                translateX: [0, Math.random() * 50 - 25],
                duration: 3000 + Math.random() * 2000,
                direction: 'alternate',
                loop: true,
                easing: 'easeInOutSine'
            });
        });
    }

    // --- 5. å…³é”®è¯æ‰“å­—æœºåŠ¨ç”» ---
    let typeInterval;
    function playKeywordAnimation() {
        // å…ˆæ”¾å¤§å…³é”®è¯
        anime({
            targets: '#annual-keyword',
            scale: [0, 1],
            opacity: [0, 1],
            duration: 1500,
            easing: 'easeOutElastic(1, .8)'
        });

        // æ‰“å­—æœºæ’­æ”¾ Keyword Representations
        const sentences = rawData.moments.keywordRepresentations;
        const target = document.getElementById('keyword-sentence');
        let sentenceIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        
        if(typeInterval) clearInterval(typeInterval);

        typeInterval = setInterval(() => {
            const currentSentence = sentences[sentenceIndex];
            
            if (!isDeleting) {
                target.innerText = currentSentence.substring(0, charIndex + 1);
                charIndex++;
                if (charIndex === currentSentence.length) {
                    isDeleting = true;
                    // åœé¡¿ä¸€ä¼š
                    clearInterval(typeInterval);
                    setTimeout(() => {
                        typeInterval = setInterval(typeLoop, 50); // åˆ é™¤é€Ÿåº¦å¿«ç‚¹
                    }, 2000); 
                    return; 
                }
            } else {
                target.innerText = currentSentence.substring(0, charIndex - 1);
                charIndex--;
                if (charIndex === 0) {
                    isDeleting = false;
                    sentenceIndex = (sentenceIndex + 1) % sentences.length;
                }
            }
        }, 150);

        // ä¸ºäº†èƒ½å¤Ÿåœ¨setTimeouté‡Œé‡æ–°èµ‹å€¼intervalï¼Œæå–é€»è¾‘
        const typeLoop = () => {
             // ä¸Šé¢é€»è¾‘çš„ç®€åŒ–ç‰ˆå‰¯æœ¬ï¼Œç”¨äºresume
             const currentSentence = sentences[sentenceIndex];
             if(isDeleting) {
                target.innerText = currentSentence.substring(0, charIndex - 1);
                charIndex--;
                if(charIndex === 0) {
                    isDeleting = false;
                    sentenceIndex = (sentenceIndex + 1) % sentences.length;
                    clearInterval(typeInterval);
                    typeInterval = setInterval(typeLoop, 150); // æ¢å¤æ‰“å­—é€Ÿåº¦
                }
             } else {
                 target.innerText = currentSentence.substring(0, charIndex + 1);
                 charIndex++;
                 if (charIndex === currentSentence.length) {
                     isDeleting = true;
                     clearInterval(typeInterval);
                     setTimeout(() => {
                         typeInterval = setInterval(typeLoop, 50);
                     }, 2000);
                 }
             }
        }
        
        // åˆå§‹å¯åŠ¨
        if(typeInterval) clearInterval(typeInterval);
        typeInterval = setInterval(typeLoop, 150);
    }

    // --- 6. å…¨å±æ»šåŠ¨é€»è¾‘ ---
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;
    let isScrolling = false;

    // è§¦æ‘¸å¤„ç†
    let startY = 0;

    function goToSlide(index) {
        if (index < 0 || index >= totalSlides) return;
        isScrolling = true;
        
        // ç§»åŠ¨å®¹å™¨
        document.getElementById('swiper').style.transform = `translateY(-${index * 100}vh)`;
        
        // å¤„ç† Active Class
        slides.forEach(s => s.classList.remove('active'));
        slides[index].classList.add('active');

        // æœ€åä¸€é¡µéšè—ç®­å¤´
        if(index === totalSlides - 1) document.getElementById('arrow').style.display = 'none';
        else document.getElementById('arrow').style.display = 'block';

        currentSlide = index;

        // ç‰¹æ®Šé¡µé¢çš„è§¦å‘é€»è¾‘
        if (index === 6) { // å…³é”®è¯é¡µé¢
            renderWordCloud();
            playKeywordAnimation();
        }

        setTimeout(() => { isScrolling = false; }, 800);
    }

    window.addEventListener('wheel', (e) => {
        if (isScrolling) return;
        if (e.deltaY > 0) goToSlide(currentSlide + 1);
        else goToSlide(currentSlide - 1);
    });

    window.addEventListener('touchstart', (e) => {
        startY = e.touches[0].clientY;
    });

    window.addEventListener('touchend', (e) => {
        if (isScrolling) return;
        const endY = e.changedTouches[0].clientY;
        if (startY - endY > 50) goToSlide(currentSlide + 1); // ä¸Šæ»‘
        if (endY - startY > 50) goToSlide(currentSlide - 1); // ä¸‹æ»‘
    });

    // --- 7. èƒŒæ™¯æ˜Ÿæ˜Ÿç”Ÿæˆ ---
    function createStars() {
        const container = document.getElementById('stars-container');
        for(let i=0; i<50; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = Math.random() * 3 + 'px';
            star.style.height = star.style.width;
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.setProperty('--duration', Math.random() * 3 + 2 + 's');
            container.appendChild(star);
        }
    }

    // --- åˆå§‹åŒ– ---
    window.onload = () => {
        initReport();
        createStars();
    };

</script>
</body>
</html>
